/**
 * Core scoring engine.
 *
 * Calculates:
 * - Heat score
 * - Repair score
 * - Flags
 * - XP delta
 *
 * Must remain deterministic.
 */
const heatScore = 